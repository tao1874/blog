---
title: å·¥å‚æ¨¡å¼
date: 2021-04-24 00:16:00
tags: JavaScript
---


å·¥å‚æ–¹æ³•å’ŒæŠ½è±¡å·¥å‚

ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬éƒ½ä¼šç”¨ `new` æ“ä½œç¬¦ç›´æ¥åˆ›å»ºå¯¹è±¡ï¼Œè¿™æœ¬èº«æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å½“æˆ‘ä»¬çš„ç³»ç»Ÿå­˜åœ¨å¾ˆå¤šçš„å…·ä½“ç±»ï¼Œå®ä¾‹åŒ–å“ªä¸ªå–å†³äºè¿è¡Œæ—¶çš„ä¸€äº›æ¡ä»¶ã€‚æ¯”å¦‚æ ¹æ®ç±»å‹åˆ›å»ºä¸åŒçš„äº§å“
```JavaScript
if (a) {
    return new ProductA()
} else if (b) {
    return new ProductB()
} else if (xxx) {
    //.......if more concrete class
}


```
å¦‚æœç³»ç»Ÿå†…æ–°å¢ä¸€ä¸ªå…·ä½“ç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦æ›´æ”¹ä»£ç ï¼Œè¿™æ ·çš„ä»£ç æ˜¾ç„¶ä¸å…·å¤‡ä¼¸ç¼©æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œè¿åäº†ç¼–ç¨‹ä¸­å¾ˆé‡è¦çš„å¼€é—­åŸåˆ™ï¼šå¯¹æ‰©å±•å¼€æ”¾ä½†æ˜¯å¯¹ä¿®æ”¹å°é—­

```mermaid
classDiagram
      Creator ..> ProductA
      Creator ..> ProductB
      Creator ..> ProductC
      Creator ..> ProductD
      
```
> å®¢æˆ·ä»£ç è€¦åˆå…·ä½“ç±»å‹



å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¾ˆå®¹æ˜“çš„æˆ‘ä»¬æƒ³åˆ°å°†å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹å•ç‹¬å‡ºæ¥ï¼Œæ¯”å¦‚æœ‰ä¸ª `createProduct ` æ–¹æ³•ï¼Œä¸“èŒåˆ›å»ºæˆ‘ä»¬éœ€è¦çš„å¯¹è±¡ï¼Œè¿™æ˜¯æœ€ç®€å•çš„å·¥å‚æ¨¡å¼çš„ä½“ç°ï¼Œä½†æ˜¯ä¾æ—§è§£å†³ä¸äº†åˆ›å»ºè€…è€¦åˆå…·ä½“ç±»çš„é—®é¢˜ã€‚


ä¾èµ–å€’ç½®åŸåˆ™æé†’æˆ‘ä»¬åˆ›å»ºå¯¹è±¡çš„æ—¶å€™è¦é¿å…ä¾èµ–å…·ä½“ç±»å‹ï¼Œè€Œæ˜¯ä¾èµ–æŠ½è±¡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¶…ç±»é‡Œå£°æ˜ä¸€ä¸ªæŠ½è±¡çš„åˆ›å»ºæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯å…³äºåˆ›å»ºå¯¹è±¡çš„æŠ½è±¡ï¼Œç„¶åå„ä¸ªå­ç±»å»å®ç°è¿™ä¸ªåˆ›å»ºæ–¹æ³•ï¼Œå­ç±»å½“ç„¶çŸ¥é“è‡ªå·±éœ€è¦å®ä¾‹åŒ–å“ªä¸ªç±»å‹ï¼Œè€Œå®¢æˆ·ä»£ç å¹¶ä¸ä¾èµ–å…·ä½“ç±»å‹ï¼Œè€Œæ˜¯ä¾èµ–æŠ½è±¡ï¼ˆå‘ä¸Šè½¬å‹ï¼‰ï¼Œå½“æˆ‘ä»¬æ‰©å±•æ–°çš„å…·ä½“ç±»ï¼Œå¹¶ä¸éœ€è¦æ›´æ”¹å®¢æˆ·çš„ä»£ç ï¼Œå®Œæˆäº†å®¢æˆ·ä»£ç ä¸å…·ä½“ç±»çš„è§£è€¦

```mermaid
classDiagram
      Creator <|-- ConcreteCreatorA
      Creator <|-- ConcreteCreatorB
      Creator ..> Product
      Creator : ...
      Creator: +someOperation()
      Creator: +createProduct() Product
      
      <<Interface>> Product
      ConcreteProductA ..|> Product
      ConcreteProductB ..|> Product
     
      class ConcreteCreatorA{
          +createProduce()
      }
      class ConcreteCreatorB{
          +createProduce()
      }
      
```
ä»£ç ç¤ºä¾‹ï¼š
```typeScript
/**
 * A factory method handles object creation and encapsulates it in a subclass.
 * This decouples the client code in the superclass from the object creation code in the subclass.
 * excerpt From: Eric Freeman. â€œHead First Design Patterns.â€ Apple Books. 
 */


abstract class PizzaStore {
   
    public orderPizza(type:string):Pizza {
        const pizza = this.createPizza(type)
        pizza.prepare()
        pizza.cut()
        return pizza
    }
    abstract createPizza(type:string):Pizza;
}
abstract class Pizza {
    name!:string
    prepare():void{
        console.log(`preparing ${this.name} pizza`);
    }
    cut():void {
        console.log('cuting into squares');
    }
}
class NewYorkStyleCheesePizza extends Pizza {
    name:string
    constructor(){
        super()
        this.name = "NewYork Style Cheese Pizza ğŸ§€ğŸ§€ğŸ§€ğŸ§€"
    }
}
class NewYorkStyleVeggiePizza extends Pizza {
    name:string
    constructor(){
        super()
        this.name = "NewYork Style Veggie Pizza ğŸ¥¦ğŸ¥¦ğŸ¥¦ğŸ¥¦"
    }
}


class NewYorkPizzaStore extends PizzaStore {
    createPizza(type:string):Pizza{
        if(type === 'cheese'){
            return new NewYorkStyleCheesePizza()
        }
        if(type === 'veggie'){
            return new NewYorkStyleVeggiePizza()
        }
        return new NewYorkStyleCheesePizza() 
    }
}
class TokyoStyelCheesePizza extends Pizza {
    name:string
    constructor() {
        super()
        this.name = "Tokyo ğŸ‡¯ğŸ‡µ Style Cheese Pizza"
    }
}
class TokyoPizzaStore extends PizzaStore {
    createPizza(type:string):Pizza{   
        console.log(type);
             
        return new TokyoStyelCheesePizza()
    }
}

//client code 

const newYorkPizzaStore = new NewYorkPizzaStore()
const tokyoPizzaStore = new TokyoPizzaStore()
newYorkPizzaStore.orderPizza('cheese')
newYorkPizzaStore.orderPizza('veggie')
tokyoPizzaStore.orderPizza("cheese")

```